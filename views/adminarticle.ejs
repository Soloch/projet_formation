<% include ./partials/head %>
<title><%= title %></title>
</head>
<% include ./partials/navbar %>
<<<<<<< HEAD



<form class="" action="/" method="post" id="articleform">
<textarea name="contentarticle" id="contentarticle"></textarea>
<button type="submit" name="button">Submit</button>
<a onclick="CKupdate();$("#articleform").ajaxSubmit();" class="btn btn-warning">Done with this article ? Post it there !</a>
=======
<div class="container text-center">
  <form class="addarticle jumbotron" action="/index" method="post">
  <label class="labelaa" for="articleimage">Illustration de l'article</label>
  <!--<input type="file" style="color: #ad8dda;" name="articleimage" value="" id="articleimage"> -->
<br>
  <input type="file" id="articleimage" type="file">

<label for="articleimage">
 
    
    <span> Importez l'image&hellip;</span>
    
</label>

  <br>
  <label class="labelaa" for="articletitle">Titre de l'article</label>
  <input type="text" class="form-control" name="articletitle" id="articletitle" value="">
  <br>
  <label class="labelaa" for="articledate">Date de parution</label>
  <input type="date" class="form-control" name="articledate" id="articledate" value="">
  <br>
  <label class="labelaa" for="articletext">Contenu de l'article</label>
  <input type="text" class="form-control" name="articletext" value="">
  <br>
  <label class="labelaa" for="authorarticle">Auteur de l'article</label>
  <input type="text" class="form-control" name="authorarticle" value="" id="authorarticle">
  <br>
    <div class="text-center">
      <button type="submit" class="btnerroraa" name="button">Ajouter l'article</button>
    </div>
  
>>>>>>> f38062d44c3261d104c2e5586b609088d20df1cd
</form>






<% include ./partials/footer %>
<script src="https://cdn.ckeditor.com/ckeditor5/1.0.0-beta.1/classic/ckeditor.js"></script>
<script>
    ClassicEditor
        .create( document.querySelector( '#contentarticle' ) )
        .catch( error => {
            console.error( error );
        } );
    function CKupdate() {
      for ( instance in CKEDITOR.instances)
      CKEDITOR.instances[instance].updateElement();
    }
</script>
<script type="text/javascript">
  const form = document.querySelector('form');
  form.addEventListener('submit', addArticle);
  function addArticle(event){
    event.preventDefault();
    if(fetch) {
      fetch('/', {
        method: 'POST',
        body: new FormData(form)
      })
      .then(checkStatus)
      .catch(function(error){
        console.error('request failled', error);
      })
    } else {
      // JQUERY XHR
    }
  }
  function checkStatus(response){
    if(response.status>= 200 && response.status < 300){
      let newArticleDiv = document.createElement('div');
      const contentarticle = document.getElementById('contentarticle').value;
      newArticleDiv.innerHTML = `${contentarticle}  `;
      document.querySelector('.fresharticles').appendChild(newArticleDiv);
      form.reset();


    }
  }
</script>
